# Grammar for Alpha

## Permanents
permanentCard -> ability? ('\n' ability)*

ability -> keywords
        -> staticAbility
        -> activatedAbility
        -> triggeredAbility

keywords -> keyword ([;,]' ' keyword)*

activatedAbility -> costs ': ' effect '.' (restriction '.')?

triggeredAbility -> triggerCondition (', ' interveningClause)? ', ' effect '.'

staticAbility -> 'As long as ' condition ', ' staticAbility
              -> 'As ' object ' enters the battlefield, choose a ' textAspect '.'
              -> 'As ' object ' enters the battlefield, you lose life equal to your life total.'
              -> 'All mountains are plains.'
              -> 'all damage that would be dealt to you by unblocked creatures is dealt to ' object ' instead.'
              -> object ' can attack as though it didn't have defender.'
              -> object ' can’t attack unless defending player controls an Island.'
              -> object ' can block an additional creature each combat.'
              -> object ' can’t block creatures with power 2 or greater.'
              -> object ' can’t be blocked except by ' object '.'
              -> object ' get' ('s')? ' ' statMod (' as long as you control a Swamp')? '.'
              -> object ' has “' ability '”'
              -> object ' has ' keyword (' and can’t be enchanted by other Auras.')? '.' ('This effect doesn't remove ~.')?
              -> object '’s power and toughness are each equal to ' amount '.'
              -> object ' doesn’t untap during its controller’s untap step.'
              -> object ' enters the battlefield with ' number ' ' counter ' counters on it.'
              -> object ' is the chosen type.'
              -> object ' is a Swamp.'
              -> object ' cost {3} more to cast.'
              -> 'Other Zombie creatures have ' ability '.'
              -> 'Other Zombies have “' ability '”'
              -> 'Other Merfolk get ' statMod ' and have ' ability '.'
              -> 'Other Goblins get ' statMod ' and have ' ability '.'
              -> 'If you would draw a card during your draw step, instead you may skip that draw. If you do, until your next turn, you can’t be attacked except by creatures with flying and/or islandwalk.'
              -> 'If you would gain life, draw that many cards instead.'
              -> 'it’s an artifact creature with power and toughness each equal to its mana value.'
              -> player ' may have ' object ' enter the battlefield as a copy of any ' object ' on the battlefield' (except)? ('.')?
              -> player ' control ' object
              -> player ' don’t lose the game for having 0 or less life.'
              -> player ' skip their untap steps.'
              -> player ' can’t untap more than one creature during their untap steps.'
              -> 'Activated abilities of white enchantments cost {3} more to activate.'
              -> 'For each 1 damage that would be dealt to ~, if it has a +1/+1 counter on it, remove a +1/+1 counter from it and prevent that 1 damage.'

except -> 'except it’s an enchantment in addition to its other types'
       -> 'except it doesn’t copy that creature’s color and it has “At the beginning of your upkeep, you may have this creature become a copy of target creature, except it doesn’t copy that creature’s color and it has this ability.”'

condition -> object ' is untapped'
          -> object ' isn’t a creature'

triggerCondition -> 'At the beginning of ' phase
                 -> 'When you control no ' object
                 -> 'When ' object ' enters the battlefield'
                 -> 'When ' object ' dies'
                 -> 'When ' object ' is put into a graveyard from the battlefield'
                 -> 'Whenever ' object ' becomes tapped'
                 -> 'Whenever ' object ' deals damage to an opponent'
                 -> 'Whenever you’re dealt damage'
                 -> 'Whenever a creature dealt damage by ~ this turn dies,'
                 -> 'Whenever a player taps a land for mana'
                 -> 'Whenever one or more creatures you control attack'

interveningClause -> 'if it’s on the battlefield'
                  -> 'unless you pay' cost
                  -> 'if ' object ' is in your graveyard with three or more creature cards above it'
                  -> 'if no creatures are on the battlefield'
                  -> 'if ' object ' has flying'

## Spells

spellCard -> spellAbility (\n spellAbility)*

spellAbility -> effect '.'
             -> restriction '.'
             -> modal
             -> 'Remove ' object ' from your deck before playing if you’re not playing for ante.'
             -> player ' chooses a number of lands they control equal to the number of lands controlled by the player who controls the fewest, then sacrifices the rest. Players discard cards and sacrifice creatures the same way.'
             -> player ' discards their hand, then draws seven cards.'
             -> player ' shuffles their hand and graveyard into their library, then draws seven cards.'
             -> player ' antes the top card of their library.'
             -> player ' draws ' amount ' cards.'
             -> player ' activates a mana ability of each land they control. Then that player loses all unspent mana and you add the mana lost this way.'
             -> player ' may tap or untap target artifact, creature, or land.'
             -> player ' own target card in the ante. Exchange that card with the top card of your library.'
             -> player ' gain life equal to the damage dealt to you this turn. ' object ' deals damage to ' something ' equal to ' amount '.'
             -> object ' becomes ' color '.'
             -> object ' can block any number of creatures this turn. It blocks each attacking creature this turn if able.'
             -> object ' attack this turn if able.'
             -> 'Exile ' object '. Its controller gains life equal to its power.'
             -> 'Tap all lands ' player ' controls and that player loses all unspent mana.'
             -> 'At the beginning of the next end step, destroy all non-Wall creatures that player controls that didn’t attack this turn. Ignore this effect for each creature the player didn’t control continuously since the beginning of the turn.'
             -> 'Take an extra turn after this one.'
             -> 'Return ' object (' from ' zone)? ' to ' zone '.'
             -> 'Change the text of ' object ' by replacing all instances of one ' textAspect ' another.'
             -> 'Discard your hand, ante the top card of your library, then draw seven cards.'
             -> 'Search your library for a card, put that card into your hand, then shuffle.'
             -> 'Look at target opponent’s hand and choose a card from it. You control that player until Word of Command finishes resolving. The player plays that card if able. While doing so, the player can activate mana abilities only if they’re from lands that player controls and only if mana they produce is spent to activate other mana abilities of lands the player controls and/or to play that card. If the chosen card is cast as a spell, you control the player while that spell is resolving.'
             -> 'Remove target creature defending player controls from combat. Creatures it was blocking that had become blocked by only that creature this combat become unblocked. You may have it block an attacking creature of your choice.'
             -> 'Copy target instant or sorcery spell, except that the copy is red. You may choose new targets for the copy.'

restriction -> 'Cast this spell only during ' phase '.'
            -> 'Spend only black mana on X.'
            -> 'As an additional cost to cast this spell, sacrifice a creature.'
            -> 'This spell costs {1} more to cast for each target beyond the first.'
            -> 'Activate only during your upkeep'

effect -> dealDamage
       -> 'Add {B}{B}{B}'
       -> 'Add an amount of {B} equal to ' amount
       -> player ' adds one mana of any type that land produced'
       -> 'Counter ' object (' unless its controller pays {X}. If that player doesn’t, they tap all lands with mana abilities they control and lose all unspent mana')
       -> 'Destroy ' object ('. ' ('It'|'They') 'can’t be regenerated')?
       -> 'Destroy target nonartifact, nonblack creature. It can’t be regenerated'
       -> 'Destroy X target Mountains. ' object ' deals damage to each creature and each player equal to ' amount
       -> 'sacrifice ' object (interveningClause)?
       -> 'sacrifice that many nontoken permanents. If you can’t, ' effect
       -> 'sacrifice a creature other than ' object '. If you can’t, ' effect
       -> 'Regenerate ' object
       -> object ' gains ' keyword ' until end of turn'
       -> object ' gets ' statMod ' until end of turn'
       -> object ' gets +1/+0 until end of turn. If this ability has been activated four or more times this turn, sacrifice ~ at the beginning of the next end step'
       -> object ' can’t be blocked this turn'
       -> object ' with toughness less than ' object '’s power gains flying until end of turn. Destroy ' object ' at the beginning of the next end step'
       -> 'Prevent the next ' number ' damage that would be dealt to ' something ' this turn'
       -> 'Prevent the next ' number ' damage that would be dealt to ' something ' this turn. Until end of turn, you may pay {1} any time you could cast an instant. If you do, prevent the next 1 damage that would be dealt to that permanent or player this turn'
       -> 'The next time a ' color ' source of your choice would deal damage to you this turn, prevent that damage'
       -> 'The next time a source of your choice would deal damage to you this turn, prevent that damage. You gain life equal to the damage prevented this way'
       -> 'The next ' number ' damage that would be dealt to ' object ' this turn is dealt to its owner instead. Only ' object '’s owner may activate this ability'
       -> 'its owner loses half their life, rounded up'
       -> 'that player may pay any amount of mana. ' object ' deals 2 damage to that player. Prevent X of that damage, where X is the amount of mana that player paid this way'
       -> 'you may pay ' cost '. If you do, ' effect
       -> 'tap ' object ' and sacrifice a land of an opponent’s choice'
       -> player ' discards ' amount ' card ' ('s')? ' at random.'
       -> player ' lose the game'
       -> player 'gain' ('s '|' ') number ' life'
       -> player ' may put ' object ' onto the battlefield'
       -> 'Choose target non-Wall creature the active player has controlled continuously since the beginning of the turn. That creature attacks this turn if able. Destroy it at the beginning of the next end step if it didn’t attack this turn. Activate only during an opponent’s turn, before attackers are declared'
       -> 'tap ' object
       -> 'untap the creature'
       -> 'put a ' counter ' counter on ' object (' for each creature that died this turn')?
       -> 'each defending player divides all creatures without flying they control into a “left” pile and a “right” pile. Then, for each attacking creature you control, choose “left” or “right.” That creature can’t be blocked this combat except by creatures with flying and creatures in a pile with the chosen label'
       -> 'it loses “enchant creature card in a graveyard” and gains “enchant creature put onto the battlefield with ~.” Return enchanted creature card to the battlefield under your control and attach ~ to it. When ~ leaves the battlefield, that creature’s controller sacrifices it'

dealDamage -> object ' deals ' number ' damage to ' something
           -> object ' deals ' number ' damage to ' something ' and ' number ' damage to ' something
           -> object ' deals ' number ' damage to ' something ' and ' object ' gains "Enchanted creature loses flying"'
           -> object ' deals ' number ' damage to ' something ', where X is ' amount
           -> object ' deals ' number ' damage to ' something '. ' player ' gain life equal to the damage dealt, but not more life than the player’s life total before the damage was dealt, the planeswalker’s loyalty before the damage was dealt, or the creature’s toughness.'
           -> object ' deals ' number ' damage to ' something '. If it’s a creature, it can’t be regenerated this turn, and if it would die this turn, exile it instead.'
           -> object ' deals ' number ' damage divided evenly, rounded down, among any number of targets'
           -> object ' deals damage to ' something ' equal to ' amount
           -> object ' deals damage equal to ' amount ' to ' something

## Definitions

modal -> 'Choose one —' ('\n• ' effect '.')+

amount -> 'three'
       -> 'X'
       -> 'the number of Swamps you control.'
       -> 'the number of Swamps they control'
       -> 'the number of creatures named Plague Rats on the battlefield.'
       -> 'the number of non-Wall creatures you control.'
       -> 'the number of Mountains put into a graveyard this way'
       -> 'the number of untapped lands they controlled at the beginning of this turn'
       -> 'the damage dealt to you this turn'
       -> 'the sacrificed creature’s mana value'
       -> 'that creature’s toughness'
       -> 'a'

color -> 'white'
      -> 'blue'
      -> 'black'
      -> 'green'
      -> 'red'

costs -> cost (', ' cost)*

cost -> '{W}'+
     -> '{U}'
     -> '{B}'+
     -> '{R}'
     -> '{1}'
     -> '{4}'
     -> '{0}'
     -> '{T}'
     -> 'Remove a ' counter ' counter from ' object

counter -> '+1/+1'
        -> 'corpse'

keyword -> 'Enchant' object
        -> 'Banding'
        -> 'First strike'
        -> 'Flying'
        -> 'Vigilance'
        -> 'Defender'
        -> 'Protection from ' color
        -> landType 'walk'
        -> 'indestructible'
        -> 'fear'
        -> 'haste'
        -> 'trample'

landType -> 'plains'
         -> 'island'
         -> 'swamp'
         -> 'mountain'

number -> '0'
       -> '1'
       -> '2'
       -> '3'
       -> '4'
       -> '7'
       -> 'X'

object -> qualifier ' ' object
       -> object 's'
       -> object ' ' objectRestriction
       -> '~'
       -> 'creature'
       -> 'creature card'
       -> 'land'
       -> landType
       -> 'Wall'
       -> 'artifact'
       -> 'enchantment'
       -> object ' or ' object
       -> 'spell'
       -> 'permanent'

qualifier -> 'Enchanted'
          -> 'all'
          -> 'each'
          -> 'target'
          -> color
          -> 'Untapped'
          -> 'blocking'
          -> 'attacking'
          -> 'that'
          -> 'this'

objectRestriction -> player ' control' ('s')?
                  -> 'with mana value X'
                  -> 'with power 2 or less'
                  -> 'without flying'
                  -> 'in a graveyard'

phase -> 'your upkeep'
      -> 'each player’s upkeep'
      -> 'the upkeep of ' object '’s controller'
      -> 'the end step'
      -> 'combat before blockers are declared'
      -> 'the declare blockers step'
      -> 'an opponent’s turn, before attackers are declared'

player -> qualifier ' ' player
       -> player 's'
       -> 'player'
       -> 'you'
       -> 'opponent'
       -> 'an opponent'
       -> 'the active player'

something -> object
          -> player
          -> 'any target'
          -> something ' and ' something
          -> 'that land's controller'
          -> 'the creature's controller'

statMod -> '+' number '/+' number
        -> '-' number '/-' number

textAspect -> 'color word'
           -> 'basic land type'

zone -> 'your graveyard'
     -> 'the battlefield'
     -> 'your hand'
     -> 'its owner’s hand'
