# Grammar for Alpha

## Permanents
permanentCard -> ability? ('\n' ability)*

ability -> keywords
        -> staticAbility
        -> activatedAbility
        -> triggeredAbility

keywords -> keyword ([;,]' ' keyword)*

activatedAbility -> costs ': ' effect '.' (restriction '.')?

triggeredAbility -> triggerCondition (', ' interveningClause)? ', ' effect (' ' interveningClause)? '.'

staticAbility -> 'As long as ' condition ', ' staticAbility
              -> 'As ' object ' enters the battlefield, choose a ' textAspect '.'
              -> 'As ' object ' enters the battlefield, choose ' player '.'
              -> 'As ' object ' enters the battlefield, you lose life equal to your life total.'
              -> 'As long as ' object ' isn’t attacking, its power and toughness are each equal to the number of Forests you control. As long as Gaea’s Liege is attacking, its power and toughness are each equal to the number of Forests defending player controls.'
              -> object ' ' ('are'|'is'|'’s') ' ' object '.'
              -> 'all damage that would be dealt to you by unblocked creatures is dealt to ' object ' instead.'
              -> object ' can attack as though ' object ' didn't have defender.'
              -> object ' can attack as though ' object ' had haste.'
              -> object ' can’t attack unless defending player controls ' object '.'
              -> object ' can block an additional creature each combat.'
              -> object ' can’t block ' object '.'
              -> object ' can’t be blocked ' ('except ')? 'by ' object '.'
              -> object ' get' ('s')? ' ' statMod (' as long as you control a Swamp')? '.'
              -> object ' gets ' statMod ' and has reach.'
              -> object ' gets +X/+Y, where X is half the number of Forests you control, rounded down, and Y is half the number of Forests you control, rounded up.'
              -> object ' get ' statMod ' and have ' ability '.'
              -> object ' ha' ('s'|'ve') ' “' ability '”'
              -> object ' have ' ability '.'
              -> object ' has ' keyword (' and can’t be enchanted by ' object)? '.' ('This effect doesn't remove ' object '.')?
              -> object '’s power and toughness are each equal to ' amount '.'
              -> object ' do' ('es')? 'n’t untap during ' phase '.'
              -> object ' enters the battlefield with ' amount ' ' counter ' counters on it.'
              -> object ' enters the battlefield tapped.'
              -> object ' cost {3} more to cast.'
              -> object ' attacks each combat if able.'
              -> 'If you would draw a card during your draw step, instead you may skip that draw. If you do, until your next turn, you can’t be attacked except by creatures with flying and/or islandwalk.'
              -> 'If you would gain life, draw that many cards instead.'
              -> 'If you would begin your turn while ' object ' is tapped, you may skip that turn instead. If you do, untap ' object '.'
              -> 'If an effect causes you to discard a card, discard it, but you may put it on top of your library instead of into your graveyard.'
              -> player ' may have ' object ' enter the battlefield as a copy of any ' object ' on the battlefield' (except)? ('.')?
              -> player ' control ' object
              -> player ' don’t lose the game for having 0 or less life.'
              -> player ' have no maximum hand size.'
              -> player ' may spend white mana as though it were red mana.'
              -> player ' may play any number of lands on each of your turns.'
              -> player ' skip their untap steps.'
              -> player ' can’t untap more than one ' object ' during their untap steps.'
              -> 'Activated abilities of white enchantments cost {3} more to activate.'
              -> 'For each 1 damage that would be dealt to ' object ', if ' condition ', remove a +1/+1 counter from it and prevent that 1 damage.'
              -> 'All creatures able to block enchanted creature do so.'

except -> 'except it’s an enchantment in addition to its other types'
       -> 'except it doesn’t copy that creature’s color and it has “At the beginning of your upkeep, you may have this creature become a copy of target creature, except it doesn’t copy that creature’s color and it has this ability.”'

triggerCondition -> triggerWord ' ' triggerEvent

triggerWord -> 'at'
            -> 'when'
            -> 'whenever'

triggerEvent -> 'the beginning of ' phase
             -> 'end of combat'
             -> object ' enters the battlefield'
             -> object ' dies'
             -> object ' is put into a graveyard from the battlefield'
             -> object ' becomes tapped'
             -> object ' is tapped for mana'
             -> object ' blocks or becomes blocked by a non-Wall creature'
             -> object ' deals damage to an opponent'
             -> object ' is dealt damage'
             -> object ' dealt damage by ' object ' this turn dies,'
             -> player ' casts a' ('n')? ' ' object
             -> player ' taps a land for mana'
             -> player ' play a land'
             -> player ' control ' object
             -> 'you’re dealt damage'
             -> 'one or more ' object ' attack'

interveningClause -> 'if ' condition
                  -> 'unless you pay' cost

condition -> object ' is untapped'
          -> object ' is tapped'
          -> object ' isn’t a creature'
          -> object ' has a ' counter ' counter on it'
          -> object ' has flying'
          -> object ' is in your graveyard with three or more creature cards above it'
          -> object ' are on the battlefield'
          -> 'it wasn’t the first land you played this turn'
          -> object ' attacked or blocked this combat'
          -> 'it’s on the battlefield'

## Spells

spellCard -> spellAbility (\n spellAbility)*

modal -> 'Choose one —' ('\n• ' effect '.')+

spellAbility -> effect '.'
             -> restriction '.'
             -> modal
             -> 'Remove ' object ' from your deck before playing if you’re not playing for ante.'
             -> player ' chooses a number of lands they control equal to the number of lands controlled by the player who controls the fewest, then sacrifices the rest. Players discard cards and sacrifice creatures the same way.'
             -> player ' discards their hand, then draws seven cards.'
             -> player ' shuffles their hand and graveyard into their library, then draws seven cards.'
             -> player ' antes the top card of their library.'
             -> player ' activates a mana ability of each land they control. Then that player loses all unspent mana and you add the mana lost this way.'
             -> player ' own target card in the ante. Exchange that card with the top card of your library.'
             -> object ' becomes ' color '.'
             -> object ' can block any number of creatures this turn. It blocks each attacking creature this turn if able.'
             -> object ' attack this turn if able.'
             -> 'Exile ' object '. Its controller gains life equal to its power.'
             -> 'Tap ' object ' and ' player ' loses all unspent mana.'
             -> 'At the beginning of the next end step, destroy all non-Wall creatures that player controls that didn’t attack this turn. Ignore this effect for each creature the player didn’t control continuously since the beginning of the turn.'
             -> 'Return ' object (' from ' zone)? ' to ' zone '.'
             -> 'Change the text of ' object ' by replacing all instances of one ' textAspect ' with another.'
             -> 'Discard your hand, ante the top card of your library, then draw seven cards.'
             -> 'Search your library for a card, put that card into your hand, then shuffle.'
             -> 'Look at target opponent’s hand and choose a card from it. You control that player until ~ finishes resolving. The player plays that card if able. While doing so, the player can activate mana abilities only if they’re from lands that player controls and only if mana they produce is spent to activate other mana abilities of lands the player controls and/or to play that card. If the chosen card is cast as a spell, you control the player while that spell is resolving.'
             -> 'Remove target creature defending player controls from combat. Creatures it was blocking that had become blocked by only that creature this combat become unblocked. You may have it block an attacking creature of your choice.'
             -> 'Copy target instant or sorcery spell, except that the copy is red. You may choose new targets for the copy.'
             -> 'This turn, instead of declaring blockers, each defending player chooses any number of creatures they control and divides them into a number of piles equal to the number of attacking creatures for whom that player is the defending player. Creatures ' player ' control that can block additional creatures may likewise be put into additional piles. Assign each pile to a different one of those attacking creatures at random. Each creature in a pile that can block the creature that pile is assigned to does so'
             -> 'Until end of turn, any time you could activate a mana ability, you may ' costs '. If you do, ' effect '.'
             -> 'Look at the top three cards of target player’s library, then put them back in any order. You may have that player shuffle.'

restriction -> 'Cast ' object ' only during ' phase
            -> 'Cast ' object ' only before ' phase
            -> 'Spend only black mana on X'
            -> 'As an additional cost to cast this spell, ' cost
            -> 'This spell costs {1} more to cast for each target beyond the first'
            -> 'Activate only during ' phase ('and only once each turn')?

effect -> dealDamage
       -> manaEffect
       -> 'Counter ' object (' unless its controller pays {X}. If that player doesn’t, they tap all lands with mana abilities they control and lose all unspent mana')
       -> 'Destroy ' object ('. ' ('It'|'They') 'can’t be regenerated')?
       -> 'Destroy ' object '. ' object ' deals damage to each creature and each player equal to ' amount
       -> 'destroy ' object ' at end of combat'
       -> 'destroy ' object '. ' player ' may attach ' object ' to ' object ' of their choice'
       -> 'sacrifice ' object (interveningClause)?
       -> 'sacrifice that many nontoken permanents. If you can’t, ' effect
       -> 'sacrifice a creature other than ' object '. If you can’t, ' effect
       -> 'Regenerate ' object
       -> 'Prevent all combat damage that would be dealt this turn.'
       -> 'Prevent the next ' number ' damage that would be dealt to ' something ' this turn'
       -> 'Prevent the next ' number ' damage that would be dealt to ' something ' this turn. Until end of turn, you may pay {1} any time you could cast an instant. If you do, prevent the next 1 damage that would be dealt to that permanent or player this turn'
       -> 'The next time a ' color ' source of your choice would deal damage to you this turn, prevent that damage'
       -> 'The next time a source of your choice would deal damage to you this turn, prevent that damage. You gain life equal to the damage prevented this way'
       -> 'The next time a source of your choice would deal damage to target creature this turn, that source deals that damage to you instead'
       -> 'The next ' number ' damage that would be dealt to ' object ' this turn is dealt to its owner instead. Only ' object '’s owner may activate this ability'
       -> 'its owner loses half their life, rounded up'
       -> 'Choose target non-Wall creature the active player has controlled continuously since the beginning of the turn. That creature attacks this turn if able. Destroy it at the beginning of the next end step if it didn’t attack this turn. Activate only during an opponent’s turn, before attackers are declared'
       -> 'tap ' object ' and sacrifice a land of an opponent’s choice'
       -> 'tap ' object
       -> 'untap ' object
       -> 'Take an extra turn after this one.'
       -> 'put a ' counter ' counter on ' object (' for each creature that died this turn')?
       -> 'Put a mire counter on target non-Swamp land. That land is a Swamp for as long as it has a mire counter on it. Activate only during your upkeep'
       -> 'put that many ' counter ' counters on ' object
       -> 'Put up to X ' counter ' counters on ' object '. This ability can’t cause the total number of +1/+0 counters on Clockwork Beast to be greater than seven. Activate only during your upkeep'
       -> 'If Chaos Orb is on the battlefield, flip Chaos Orb onto the battlefield from a height of at least one foot. If Chaos Orb turns over completely at least once during the flip, destroy all nontoken permanents it touches. Then destroy Chaos Orb'
       -> 'remove a ' counter ' counter from ' object
       -> 'at the beginning of each of your upkeeps for the rest of the game, remove all mire counters from a land that a mire counter was put onto with Cyclopean Tomb but that a mire counter has not been removed from with Cyclopean Tomb'
       -> 'The next time an unblocked creature of your choice would deal combat damage to you this turn, prevent all but 1 of that damage'
       -> 'Look at target player’s hand'
       -> 'Create a 1/1 colorless Insect artifact creature token with flying named Wasp'
       -> object ' gains ' keyword ' until end of turn'
       -> object ' gains trample and gets +X/+0 until end of turn, where X is its power. At the beginning of the next end step, destroy that creature if it attacked this turn.'
       -> object ' gets ' statMod ' until end of turn'
       -> object ' gets ' statMod ' until end of turn. If this ability has been activated four or more times this turn, sacrifice ' object ' at the beginning of the next end step'
       -> object ' can’t be blocked this turn'
       -> object ' with toughness less than ' object '’s power gains flying until end of turn. Destroy ' object ' at the beginning of the next end step'
       -> object ' becomes a Forest until ' object ' leaves the battlefield'
       -> object ' becomes a 3/6 Golem artifact creature until end of combat'
       -> player ' draws ' object
       -> player ' draws an additional card'
       -> player ' discards ' object (' at random')?
       -> player ' lose the game'
       -> player ' gain' ('s '|' ') number ' life'
       -> player ' gain life equal to ' amount '. ' object ' deals damage to ' something ' equal to ' amount '.'
       -> player ' may ' cost '. If you do, ' effect
       -> player ' may put ' object ' onto the battlefield'
       -> player ' may draw ' object
       -> player ' may tap or untap ' object
       -> player ' may pay any amount of mana. ' object ' deals 2 damage to that player. Prevent X of that damage, where X is the amount of mana that player paid this way'
       -> player ' may choose a creature card in your hand whose mana cost could be paid by some amount of, or all of, the mana you spent on {X}. If you do, you may cast that card face down as a 2/2 creature spell without paying its mana cost. If the creature that spell becomes as it resolves has not been turned face up and would assign or deal damage, be dealt damage, or become tapped, instead it’s turned face up and assigns or deals damage, is dealt damage, or becomes tapped. Activate only as a sorcery.'
       -> player ' divides all creatures without flying they control into a “left” pile and a “right” pile. Then, for each attacking creature you control, choose “left” or “right.” That creature can’t be blocked this combat except by creatures with flying and creatures in a pile with the chosen label'
       -> 'it loses “enchant creature card in a graveyard” and gains “enchant creature put onto the battlefield with ~.” Return enchanted creature card to the battlefield under your control and attach ~ to it. When ~ leaves the battlefield, that creature’s controller sacrifices it'

dealDamage -> object ' deals ' number ' damage to ' something
           -> object ' deals ' number ' damage to ' something ' and ' number ' damage to ' something
           -> object ' deals ' number ' damage to ' something ' and ' object ' gains "Enchanted creature loses flying"'
           -> object ' deals ' number ' damage to ' something ', where X is ' amount
           -> object ' deals ' number ' damage to ' something '. ' player ' gain life equal to the damage dealt, but not more life than the player’s life total before the damage was dealt, the planeswalker’s loyalty before the damage was dealt, or the creature’s toughness'
           -> object ' deals ' number ' damage to ' something '. If it’s a creature, it can’t be regenerated this turn, and if it would die this turn, exile it instead'
           -> object ' deals ' number ' damage divided evenly, rounded down, among any number of targets'
           -> object ' deals damage to ' something ' equal to ' amount
           -> object ' deals damage equal to ' amount ' to ' something

manaEffect -> 'add ' mana
           -> 'add an amount of {B} equal to ' amount
           -> 'add ' amount ' mana of any ' ('one ')? 'color'
           -> player ' adds ' amount ' mana of any type that land produced'
           -> 'its controller adds an additional ' mana

## Definitions

amount -> englishNumber (' or more')?
       -> 'X'
       -> 'the number of ' object
       -> 'the number of Mountains put into a graveyard this way'
       -> 'the number of untapped lands they controlled at the beginning of this turn'
       -> 'the number of cards in their hand minus 4'
       -> 'the damage dealt to you this turn'
       -> 'the sacrificed creature’s mana value'
       -> 'that creature’s toughness'

englishNumber -> 'one'
              -> 'three'
              -> 'seven'

costs -> ('pay ')? cost (', ' cost)*

cost ->(mana)+
     -> '{T}'
     -> number ' life'
     -> 'remove a ' counter ' counter from ' object
     -> 'sacrifice ' object

determiner -> article
           -> demonstrative
           -> amount
           -> 'all'
           -> 'each'
           -> 'other'
           -> 'target'
           -> 'no'

keyword -> 'enchant' object
        -> 'banding'
        -> 'first strike'
        -> 'flying'
        -> 'vigilance'
        -> 'defender'
        -> 'protection from ' color
        -> landType 'walk'
        -> 'indestructible'
        -> 'fear'
        -> 'haste'
        -> 'trample'
        -> 'reach'

object -> premodifier ' ' object
       -> object ' ' postmodifier
       -> object 's'
       -> (object ', ')? object ' or ' object
       -> object ', ' object ' and ' object
       -> '~'
       -> type
       -> 'card'
       -> 'spell'
       -> 'permanent'
       -> 'it'

postmodifier -> player ' control' ('s')?
             -> 'in a graveyard'
             -> 'with' ('out')? ' ' quality
             -> 'named Plague Rats on the battlefield'
             -> 'that are still lands'
             -> 'with power and toughness each equal to its mana value'

premodifier -> (premodifier ', ')+ premodifier
            -> adjective
            -> determiner
            -> type
            -> '1/1'

type -> 'non' ('-')? type
     -> cardType
     -> landType
     -> creatureType
     -> 'aura'
     -> 'chosen type'

quality -> 'mana value ' number
        -> 'power ' number ' or less'
        -> keyword
        -> 'power ' number ' or greater'

phase -> 'your turn'
      -> 'your untap step'
      -> 'their controllers’ untap steps.'
      -> 'your upkeep'
      -> 'your draw step'
      -> 'your declare attackers step'
      -> 'its controller’s untap step'
      -> 'the chosen player’s upkeep'
      -> 'the upkeep of ' object '’s controller'
      -> 'each player’s upkeep'
      -> 'each player’s draw step'
      -> 'combat'
      -> 'an opponent’s turn, before attackers are declared'
      -> 'combat before blockers are declared'
      -> 'the declare blockers step'
      -> 'the combat damage step'
      -> 'the end step'

player -> determiner ' ' player
       -> player 's'
       -> object '’s controller'
       -> 'player'
       -> 'you'
       -> 'opponent'
       -> 'active player'
       -> 'defending player'
       -> 'they'

something -> object
          -> player
          -> 'any target'
          -> something ' and ' something

textAspect -> 'color word'
           -> 'basic land type'

zone -> 'your graveyard'
     -> 'the battlefield'
     -> 'your hand'
     -> 'its owner’s hand'

## Morphemes

adjective -> color
          -> 'enchanted'
          -> 'untapped'
          -> 'blocking'
          -> 'attacking'

article -> 'the'
        -> 'a'
        -> 'an'

cardType -> 'creature'
         -> 'land'
         -> 'artifact'
         -> 'enchantment'

color -> 'non' color
      -> 'white'
      -> 'blue'
      -> 'black'
      -> 'green'
      -> 'red'

counter -> statMod
        -> 'corpse'
        -> 'vitality'

creatureType -> 'Wall'
             -> 'Merfolk'
             -> 'Goblin'
             -> 'Zombie'

demonstrative -> 'this'
              -> 'these'
              -> 'those'
              -> 'that'

landType -> 'plains'
         -> 'island'
         -> 'swamp'
         -> 'mountain'
         -> 'forest'

mana -> '{W}'+
     -> '{U}'+
     -> '{B}'+
     -> '{R}'+
     -> '{G}'+
     -> '{C}'+
     -> '{' number '}'

number -> '0'
       -> '1'
       -> '2'
       -> '3'
       -> '4'
       -> '5'
       -> '6'
       -> '7'
       -> 'X'

statMod -> '+' number '/+' number
        -> '-' number '/-' number
