# Grammar for Alpha

## Permanents
permanentCard -> ability? ('\n' ability)*

ability -> keywords
        -> staticAbility
        -> activatedAbility
        -> triggeredAbility

keywords -> keyword ([;,]' ' keyword)*

staticAbility -> 'As long as ' condition ', ' staticAbility
              -> object ' can attack as though it didn't have defender.'
              -> 'All mountains are plains.'
              -> object ' get' ('s')? ' ' statMod '.'
              -> object ' has “' ability '”'
              -> object ' has ' keyword (' and can’t be enchanted by other Auras.')? '.' ('This effect doesn't remove ~.')?
              -> 'If you would draw a card during your draw step, instead you may skip that draw. If you do, until your next turn, you can’t be attacked except by creatures with flying and/or islandwalk.'
              -> 'all damage that would be dealt to you by unblocked creatures is dealt to ~ instead.'
              -> 'it’s an artifact creature with power and toughness each equal to its mana value.'
              -> 'You may have ~ enter the battlefield as a copy of any creature on the battlefield' (except)? ('.')?
              -> 'You control ' object
              -> object ' can’t be blocked except by ' object '.'
              -> 'Other Merfolk get ' statMod ' and have ' ability '.'
              -> 'As ~ enters the battlefield, choose a basic land type.'
              -> object ' is the chosen type.'
              -> object ' can’t attack unless defending player controls an Island.'
              -> 'Players skip their untap steps.'

except -> 'except it’s an enchantment in addition to its other types'
       -> 'except it doesn’t copy that creature’s color and it has “At the beginning of your upkeep, you may have this creature become a copy of target creature, except it doesn’t copy that creature’s color and it has this ability.”'


condition -> object ' is untapped'
          -> object ' isn’t a creature'

activatedAbility -> costs ': ' effect

costs -> cost (', ' cost)*

cost -> '{W}'+
     -> '{U}'
     -> '{1}'
     -> '{0}'
     -> '{T}'

effect -> object 'gets ' statMod ' until end of turn.'
                 -> 'The next time a ' color ' source of your choice would deal damage to you this turn, prevent that damage.'
                 -> 'Destroy ' object '.'
                 -> 'The next 1 damage that would be dealt to ' object ' this turn is dealt to its owner instead. Only ' object '’s owner may activate this ability.'
                 -> 'Prevent the next 1 damage that would be dealt to any target this turn.'
                 -> object ' deals 1 damage to any target.'

triggeredAbility -> triggerCondition ', ' triggerEffect

triggerCondition -> 'At the beginning of your upkeep'
                 -> 'At the beginning of each player’s upkeep'
                 -> 'At the beginning of the upkeep of ' object '’s controller'
                 -> 'When ' object ' dies'
                 -> 'Whenever ' object ' becomes tapped'
                 -> 'When you control no islands'
                 
triggerEffect -> object ' deals damage to that player equal to the number of Swamps they control.'
              -> 'its owner loses half their life, rounded up.'
              -> '~ deals damage equal to that creature’s toughness to the creature’s controller.'
              -> object ' deals 1 damage to that player.'
              -> 'you gain 1 life.'
              -> 'sacrifice ' object (' unless you pay ' cost)? '.'
              -> 'that player may pay any amount of mana. ~ deals 2 damage to that player. Prevent X of that damage, where X is the amount of mana that player paid this way.'
              -> object ' deals 2 damage to that land’s controller.'
              -> 'you may pay ' cost '. If you do, you gain 1 life.'

statMod -> '+1/+1'
        -> '+0/+2'
        -> '+0/+1'
        -> '+1/+2'
        -> '+1/+0'

## Spells

spellCard -> spellAbility (\n spellAbility)*

spellAbility -> 'Destroy ' object '.' (' They can’t be regenerated.')?
             -> 'Each player chooses a number of lands they control equal to the number of lands controlled by the player who controls the fewest, then sacrifices the rest. Players discard cards and sacrifice creatures the same way.'
             -> restriction
             -> modal
             -> object ' can block any number of creatures this turn. It blocks each attacking creature this turn if able.'
             -> 'Regenerate ' object
             -> 'Prevent the next X damage that would be dealt to any target this turn. Until end of turn, you may pay {1} any time you could cast an instant. If you do, prevent the next 1 damage that would be dealt to that permanent or player this turn.'
             -> object ' becomes ' color '.'
             -> 'Return target creature card from your graveyard to the battlefield.'
             -> 'The next time a source of your choice would deal damage to you this turn, prevent that damage. You gain life equal to the damage prevented this way.'
             -> object ' gets +7/+7 until end of turn.'
             -> 'Exile ' object '. Its controller gains life equal to its power.'
             -> 'Target player draws three cards.'
             -> 'Target player draws X cards.'
             -> 'Counter ' object
             -> 'Target player activates a mana ability of each land they control. Then that player loses all unspent mana and you add the mana lost this way.'
             -> object ' gains ' keyword ' until end of turn.'
             -> 'Change the text of ' object ' by replacing all instances of one ' textAspect ' another.'
             -> 'Tap all lands target player controls and that player loses all unspent mana.'
             -> 'Counter target spell unless its controller pays {X}. If that player doesn’t, they tap all lands with mana abilities they control and lose all unspent mana.'
             -> '~ deals 4 damage to any target and 2 damage to you.'
             -> 'Creatures the active player controls attack this turn if able.'
             -> 'At the beginning of the next end step, destroy all non-Wall creatures that player controls that didn’t attack this turn. Ignore this effect for each creature the player didn’t control continuously since the beginning of the turn.'
             -> 'Take an extra turn after this one.'
             -> 'Each player shuffles their hand and graveyard into their library, then draws seven cards.'
             ->'You may tap or untap target artifact, creature, or land.'
             -> 'Counter target spell with mana value X.'
             -> 'Return ' object ' to its owner’s hand.'
             -> 'Destroy X target Mountains. ~ deals damage to each creature and each player equal to the number of Mountains put into a graveyard this way.'


restriction -> 'Cast this spell only during combat before blockers are declared'
            -> 'Cast this spell only during an opponent’s turn, before attackers are declared.'

modal -> 'Choose one —' ('\n• ' modalEffect)+

modalEffect -> 'Target player gains 3 life.'
       -> 'Prevent the next 3 damage that would be dealt to any target this turn.'
       -> 'Counter ' object '.'
       -> 'Destroy ' object '.'

## Definitions
color -> 'white'
      -> 'blue'
      -> 'black'
      -> 'green'
      -> 'red'

object -> '~'
       -> 'creature'
       -> 'land'
       -> 'forest'
       -> 'Wall'
       -> 'artifact'
       -> 'enchantment'
       -> object ' or ' object
       -> 'spell'
       -> 'permanent'
       -> objectQualifier ' ' object
       -> object 's'
       -> object ' ' objectRestriction

objectQualifier -> 'Enchanted'
                -> 'all'
                -> 'target'
                -> color
                -> 'Untapped'
                -> 'blocking'

objectRestriction -> 'you control'
                  -> 'defending player controls'
                  -> 'an opponent controls'

keyword -> 'Enchant' object
        -> 'Banding'
        -> 'First strike'
        -> 'Flying'
        -> 'Vigilance'
        -> 'Defender'
        -> 'Protection from ' color
        -> 'islandwalk'
        -> 'indestructible'

textAspect -> 'color word'
           -> 'basic land type'
